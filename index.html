<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Рулетка</title>
<style>
body {
    margin: 0;
    background: #0f172a;
    color: white;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}
.container {
    text-align: center;
}
h1 {
    margin-bottom: 20px;
}
.roulette {
    width: 500px;
    height: 120px;
    overflow: hidden;
    border: 3px solid #22c55e;
    background: #020617;
    position: relative;
    margin-bottom: 20px;
}
.items {
    display: flex;
    height: 100%;
}
.item {
    min-width: 100px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 18px;
    border-right: 1px solid #1e293b;
}
.roulette::after {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 50%;
    width: 4px;
    background: red;
    transform: translateX(-50%);
}
button {
    padding: 10px 25px;
    font-size: 18px;
    cursor: pointer;
    background: #22c55e;
    border: none;
    border-radius: 6px;
}
button:disabled {
    background: gray;
}
.result {
    margin-top: 15px;
    font-size: 20px;
}
</style>
</head>
<body>
<div class="container">
    <h1>Что РКН заблокирует следующим?</h1>
    <div class="roulette">
        <div class="items" id="items"></div>
    </div>
    <button id="spin">Крутить</button>
    <div class="result" id="result"></div>
</div>

<script>
const baseItems = ["max", "vk", "telegram", "sberbank", "tbank"];
const itemsContainer = document.getElementById("items");
const spinBtn = document.getElementById("spin");
const result = document.getElementById("result");

const ITEM_WIDTH = 100; // ширина одного элемента
const VISIBLE_WIDTH = 500; // ширина рулетки
const REPEAT = 50; // сколько повторов для плавной прокрутки

// Заполняем рулетку
function fillItems() {
    itemsContainer.innerHTML = "";
    for (let i = 0; i < REPEAT; i++) {
        baseItems.forEach(text => {
            const div = document.createElement("div");
            div.className = "item";
            div.textContent = text;
            itemsContainer.appendChild(div);
        });
    }
}

fillItems();

spinBtn.onclick = () => {
    spinBtn.disabled = true;
    result.textContent = "";

    // Сбрасываем трансформацию для нового спина
    itemsContainer.style.transition = "none";
    itemsContainer.style.transform = "translateX(0)";

    requestAnimationFrame(() => {
        requestAnimationFrame(() => {
            // Выбираем случайный предмет
            const winItemIndex = Math.floor(Math.random() * baseItems.length);

            // Центр рулетки
            const centerPos = VISIBLE_WIDTH / 2 - ITEM_WIDTH / 2;

            // Вычисляем точный индекс элемента, который окажется в центре
            const stopIndex = (REPEAT - 1) * baseItems.length + winItemIndex;

            const offset = stopIndex * ITEM_WIDTH - centerPos;

            // Анимируем прокрутку
            itemsContainer.style.transition = "transform 4s cubic-bezier(.08,.6,0,1)";
            itemsContainer.style.transform = `translateX(-${offset}px)`;

            // После анимации показываем результат
            setTimeout(() => {
                result.textContent = "Выпало: " + baseItems[winItemIndex];
                spinBtn.disabled = false;
            }, 4000);
        });
    });
};
</script>
</body>
</html>